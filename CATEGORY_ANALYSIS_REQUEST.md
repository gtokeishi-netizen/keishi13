# カテゴリ問題の調査リクエスト

## ユーザーからの指摘

> "ファイル: inc/admin-functions.php
> このファイルカテゴリおかしくない？いっぱいあるし定義バラバラじゃない？"

## 調査内容

### 1. admin-functions.php のカテゴリ関連コード確認結果

**タクソノミー使用箇所（正常）:**
- Line 779: `remove_meta_box('grant_categorydiv', 'grant', 'side');`
- Line 819: `'taxonomy' => 'grant_category'` - タクソノミー取得
- Line 823: `wp_get_post_terms($post->ID, 'grant_category')` - 投稿のカテゴリ取得
- Line 978-980: `wp_set_post_terms($post_id, $categories, 'grant_category');` - カテゴリ保存

**結論:** admin-functions.php のコード自体は問題なし ✅

### 2. タクソノミー登録確認

**theme-foundation.php (Line 281-310):**
```php
register_taxonomy('grant_category', 'grant', array(
    'hierarchical' => true,  // 階層型（親子関係あり）
    'show_admin_column' => true,
    // ... その他の設定
));
```

**結論:** タクソノミー登録も正常 ✅

### 3. 考えられる問題

ユーザーが指摘する「いっぱいある」「定義バラバラ」は以下の可能性：

#### A. データベース内に重複/類似カテゴリが多数存在
例:
- IT・デジタル
- IT/デジタル
- ITデジタル
- ビジネス支援
- ビジネス
- 事業支援

#### B. カテゴリの初期データが複数箇所で定義されている
- 削除したサンプルデータ作成機能（削除済み）
- スプレッドシートから同期時に自動作成
- 手動で管理画面から追加

#### C. カテゴリの命名規則が統一されていない
- 全角/半角の不統一
- 区切り文字の不統一（・、/、スペース）
- 同義語の重複（「DX」と「デジタル変換」など）

## 必要な確認事項

1. **実際のデータベース内容確認**
   - grant_category タクソノミーのタ���ム一覧
   - 各タームの投稿数
   - 重複・類似タームの検出

2. **スプレッドシートとの同期状況**
   - V列に記載されているカテゴリ名
   - 表記の統一性

3. **推奨される標準カテゴリリスト**
   - 助成金分野で一般的なカテゴリ分類
   - 統一された命名規則

## 次のアクション

ユーザーに以下を確認：
1. WordPress管理画面で「助成金 > カテゴリー」を開いたときに表示されるカテゴリ一覧
2. 具体的にどのカテゴリが重複/おかしいと感じるか
3. 理想的なカテゴリ構成のイメージ

または、以下の対応を提案：
1. カテゴリ整理スクリプトの作成
2. 標準カテゴリマスタの作成
3. カテゴリマージ機能の実装
