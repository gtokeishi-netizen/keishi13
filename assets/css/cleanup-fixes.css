/**
 * Cleanup Fixes - Joseikin Insight
 * UI要素のクリーンアップと改善
 * 
 * User Requests:
 * 1. グリッド/リスト切り替え - テキスト削除、アイコンのみ
 * 2. 詳細フィルターのカテゴリにアイコン追加
 * 3. 大項目小項目の仕組み改善
 * 4. AI申請難易度表示の削除
 * 5. 「AIに質問」ボタンの削除
 * 6. 「公式サイト」ボタンの削除
 * 7. ボタンの矢印アイコン削除
 * 
 * @version 1.0.0
 * @date 2025-10-05
 */

/* ============================================================
   PRIORITY FIX #1: VIEW TOGGLE - ICON ONLY (NO TEXT)
   表示切り替え - アイコンのみ（テキスト削除）
   ============================================================ */

/* View toggle buttons - icon only, no text */
.view-btn,
.clean-view-btn,
[class*="view-toggle"],
[data-view] {
    min-width: 44px !important;
    max-width: 44px !important;
    width: 44px !important;
    height: 44px !important;
    padding: 0 !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    background: #ffffff !important;
    border: 2px solid #000000 !important;
    border-radius: 8px !important;
    cursor: pointer !important;
    transition: all 0.2s ease !important;
    overflow: hidden !important;
    position: relative !important;
}

/* Hide ALL text inside view buttons */
.view-btn *:not(i),
.clean-view-btn *:not(i),
.view-btn span,
.clean-view-btn span,
.view-btn .text,
.clean-view-btn .text {
    display: none !important;
}

/* Show only icons */
.view-btn i,
.clean-view-btn i,
.view-btn .icon,
.clean-view-btn .icon {
    display: block !important;
    font-size: 18px !important;
    color: #000000 !important;
}

/* Active state */
.view-btn.active,
.clean-view-btn.active {
    background: #000000 !important;
}

.view-btn.active i,
.clean-view-btn.active i {
    color: #ffffff !important;
}

/* Hover state */
.view-btn:hover,
.clean-view-btn:hover {
    background: #f0f0f0 !important;
}

.view-btn.active:hover,
.clean-view-btn.active:hover {
    background: #2d2d2d !important;
}

/* Grid view icon */
.view-btn[data-view="grid"]::before,
.clean-view-btn[data-view="grid"]::before,
button[title*="グリッド"]::before {
    content: "\f00a" !important; /* fa-th */
    font-family: "Font Awesome 6 Free" !important;
    font-weight: 900 !important;
    font-size: 18px !important;
    position: absolute !important;
    top: 50% !important;
    left: 50% !important;
    transform: translate(-50%, -50%) !important;
}

/* List view icon */
.view-btn[data-view="list"]::before,
.clean-view-btn[data-view="list"]::before,
button[title*="リスト"]::before {
    content: "\f0c9" !important; /* fa-bars */
    font-family: "Font Awesome 6 Free" !important;
    font-weight: 900 !important;
    font-size: 18px !important;
    position: absolute !important;
    top: 50% !important;
    left: 50% !important;
    transform: translate(-50%, -50%) !important;
}

/* If button has icon already, hide original and use ::before */
.view-btn[data-view] i,
.clean-view-btn[data-view] i {
    opacity: 0 !important;
}

/* ============================================================
   PRIORITY FIX #2: DETAILED FILTER CATEGORIES - ADD ICONS
   詳細フィルターのカテゴリにアイコン追加
   ============================================================ */

/* Category filter items in detailed filters */
.filter-category-item,
.category-filter-option,
[class*="filter-cat"],
.detailed-filter .category-item {
    display: inline-flex !important;
    align-items: center !important;
    gap: 10px !important;
    padding: 10px 16px !important;
    background: #ffffff !important;
    color: #000000 !important;
    border: 2px solid #000000 !important;
    border-radius: 8px !important;
    font-size: 14px !important;
    font-weight: 600 !important;
    cursor: pointer !important;
    transition: all 0.2s ease !important;
}

.filter-category-item:hover,
.filter-category-item.active {
    background: #000000 !important;
    color: #ffffff !important;
}

/* Add icons before category text */
.filter-category-item::before,
.category-filter-option::before {
    font-family: "Font Awesome 6 Free" !important;
    font-weight: 900 !important;
    font-size: 16px !important;
}

/* Specific category icons mapping */
.filter-category-item[data-slug*="it"]::before,
.filter-category-item[data-slug*="digital"]::before,
.category-filter-option[data-slug*="デジタル"]::before {
    content: "\f109" !important; /* laptop-code */
}

.filter-category-item[data-slug*="manufacturing"]::before,
.filter-category-item[data-slug*="ものづくり"]::before,
.category-filter-option[data-slug*="製造"]::before {
    content: "\f275" !important; /* industry */
}

.filter-category-item[data-slug*="startup"]::before,
.filter-category-item[data-slug*="創業"]::before,
.category-filter-option[data-slug*="起業"]::before {
    content: "\f135" !important; /* rocket */
}

.filter-category-item[data-slug*="small"]::before,
.filter-category-item[data-slug*="商業"]::before,
.category-filter-option[data-slug*="小規模"]::before {
    content: "\f54e" !important; /* store */
}

.filter-category-item[data-slug*="environment"]::before,
.filter-category-item[data-slug*="環境"]::before,
.category-filter-option[data-slug*="省エネ"]::before {
    content: "\f4d8" !important; /* leaf */
}

.filter-category-item[data-slug*="employment"]::before,
.filter-category-item[data-slug*="人材"]::before,
.category-filter-option[data-slug*="雇用"]::before {
    content: "\f0c0" !important; /* users */
}

/* Default icon for categories without specific mapping */
.filter-category-item:not([data-slug])::before,
.category-filter-option:not([data-slug])::before {
    content: "\f07b" !important; /* folder */
}

/* ============================================================
   PRIORITY FIX #3: PARENT-CHILD CATEGORY SYSTEM
   大項目小項目の仕組み改善
   
   NOTE: The category-hierarchy.php template has its own inline styles.
   These rules enhance and ensure monochrome styling consistency.
   ============================================================ */

/* Parent category container - actual class names from template */
.hierarchy-item {
    background: #ffffff !important;
    border: 2px solid #e5e5e5 !important;
    border-radius: 12px !important;
    overflow: hidden !important;
    transition: all 0.3s ease !important;
}

.hierarchy-item:hover {
    border-color: #000000 !important;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08) !important;
}

/* Parent category button - ensure strong monochrome styling */
.parent-category-button {
    width: 100% !important;
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    padding: 20px 24px !important;
    background: transparent !important;
    border: none !important;
    cursor: pointer !important;
    transition: background 0.2s ease !important;
}

.parent-category-button:hover {
    background: #fafafa !important;
}

.parent-category-button.active {
    background: #f5f5f5 !important;
}

/* Parent info section */
.parent-info {
    display: flex !important;
    align-items: center !important;
    gap: 16px !important;
    flex: 1 !important;
}

/* Parent name - ensure black text */
.parent-name {
    font-size: 17px !important;
    font-weight: 700 !important;
    color: #000000 !important;
}

/* Parent count badge - ensure monochrome */
.parent-count {
    padding: 4px 12px !important;
    background: #f5f5f5 !important;
    border: 1px solid #e5e5e5 !important;
    border-radius: 16px !important;
    font-size: 13px !important;
    font-weight: 700 !important;
    color: #000000 !important;
}

/* Toggle and view icons */
.toggle-icon,
.view-icon {
    width: 32px !important;
    height: 32px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    background: #f5f5f5 !important;
    border-radius: 50% !important;
    transition: all 0.2s ease !important;
}

.parent-category-button:hover .toggle-icon,
.parent-category-button:hover .view-icon {
    background: #000000 !important;
    color: #ffffff !important;
}

.toggle-icon i {
    transition: transform 0.3s ease !important;
}

.parent-category-button.active .toggle-icon i {
    transform: rotate(180deg) !important;
}

/* Child categories container */
.child-categories {
    max-height: 0 !important;
    overflow: hidden !important;
    transition: max-height 0.4s ease, padding 0.4s ease !important;
    background: #fafafa !important;
}

.child-categories.expanded {
    max-height: 2000px !important;
    padding: 16px 24px 24px !important;
}

/* Child category grid */
.child-categories-grid {
    display: grid !important;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)) !important;
    gap: 10px !important;
}

/* Child category items */
.child-category-item {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    padding: 12px 16px !important;
    background: #ffffff !important;
    border: 1px solid #e5e5e5 !important;
    border-radius: 8px !important;
    text-decoration: none !important;
    transition: all 0.2s ease !important;
}

.child-category-item:hover {
    background: #000000 !important;
    border-color: #000000 !important;
    transform: translateX(4px) !important;
}

/* Child name - ensure proper color */
.child-name {
    font-size: 14px !important;
    font-weight: 600 !important;
    color: #2d2d2d !important;
    transition: color 0.2s ease !important;
}

.child-category-item:hover .child-name {
    color: #ffffff !important;
}

/* Child count badge */
.child-count {
    padding: 2px 8px !important;
    background: #f5f5f5 !important;
    border-radius: 12px !important;
    font-size: 12px !important;
    font-weight: 700 !important;
    color: #000000 !important;
    transition: all 0.2s ease !important;
}

.child-category-item:hover .child-count {
    background: rgba(255, 255, 255, 0.2) !important;
    color: #ffffff !important;
}

/* Mobile responsive for parent-child system */
@media (max-width: 768px) {
    .parent-category-button {
        padding: 16px 20px !important;
    }
    
    .parent-name {
        font-size: 15px !important;
    }
    
    .parent-count {
        padding: 3px 10px !important;
        font-size: 12px !important;
    }
    
    .child-categories-grid {
        grid-template-columns: 1fr !important;
        gap: 8px !important;
    }
    
    .child-category-item {
        padding: 10px 14px !important;
    }
    
    .child-name {
        font-size: 13px !important;
    }
}

@media (max-width: 480px) {
    .parent-info {
        gap: 12px !important;
    }
    
    .parent-name {
        font-size: 14px !important;
    }
}

/* ============================================================
   PRIORITY FIX #4: REMOVE AI DIFFICULTY RATING
   AI申請難易度表示の削除
   ============================================================ */

/* Hide AI difficulty rating completely */
.grant-ai-difficulty,
[class*="ai-difficulty"],
[class*="difficulty-stars"],
[data-level],
[aria-label*="AI申請難易度"] {
    display: none !important;
}

/* Also hide difficulty labels */
.difficulty-label,
.difficulty-stars,
.difficulty-rating {
    display: none !important;
}

/* ============================================================
   PRIORITY FIX #5: REMOVE "AIに質問" BUTTON
   「AIに質問」ボタンの削除
   ============================================================ */

/* Hide AI question button */
.grant-btn--ai,
button[class*="btn-ai"],
[onclick*="openGrantAIChat"],
button[data-grant-title] {
    display: none !important;
}

/* Also hide any AI chat related buttons */
.ai-question-btn,
.ask-ai-btn,
[class*="ai-chat-btn"] {
    display: none !important;
}

/* ============================================================
   PRIORITY FIX #6: REMOVE "公式サイト" BUTTON
   「公式サイト」ボタンの削除
   ============================================================ */

/* Hide official site button */
.grant-btn--official,
.official-site-btn,
button[class*="official"],
a[class*="official-site"],
[href*="official"],
.grant-actions .grant-btn:nth-child(2) {
    display: none !important;
}

/* Specific selector for buttons containing "公式サイト" text */
button:has(span:contains("公式サイト")),
a:has(span:contains("公式サイト")) {
    display: none !important;
}

/* Alternative - hide by text content */
.grant-btn span:contains("公式サイト"),
button span:contains("公式サイト") {
    display: none !important;
}

/* Hide parent button if it contains "公式サイト" */
.grant-actions .grant-btn:has(span:contains("公式サイト")) {
    display: none !important;
}

/* ============================================================
   PRIORITY FIX #7: REMOVE ARROW ICONS FROM BUTTONS
   ボタンの矢印アイコン削除
   ============================================================ */

/* Remove all arrow ::after pseudo-elements from buttons */
.grant-btn::after,
.grant-btn--primary::after,
.grant-detail-btn::after,
button[class*="grant-btn"]::after {
    display: none !important;
    content: none !important;
}

/* Remove arrow icons (→) */
.grant-btn .arrow,
.grant-btn .fa-arrow-right,
.grant-btn .arrow-icon,
button .fa-arrow-right {
    display: none !important;
}

/* Remove any arrow-like elements */
.grant-btn [class*="arrow"],
.grant-btn i[class*="arrow"],
button [class*="arrow"] {
    display: none !important;
}

/* Ensure text is centered without arrow */
.grant-btn,
.grant-btn--primary {
    justify-content: center !important;
    gap: 0 !important;
}

/* ============================================================
   ADDITIONAL CLEANUP
   追加のクリーンアップ
   ============================================================ */

/* Clean button styling - no extra icons */
.grant-btn,
.grant-btn--primary {
    background: #000000 !important;
    color: #ffffff !important;
    padding: 14px 28px !important;
    border: 2px solid #000000 !important;
    border-radius: 8px !important;
    font-size: 16px !important;
    font-weight: 700 !important;
    text-decoration: none !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    transition: all 0.2s ease !important;
}

.grant-btn:hover,
.grant-btn--primary:hover {
    background: #2d2d2d !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2) !important;
}

/* Grant actions container - single button layout */
.grant-actions {
    display: flex !important;
    gap: 12px !important;
    align-items: center !important;
    justify-content: flex-start !important;
}

/* Hide empty action containers */
.grant-actions:empty {
    display: none !important;
}

/* ============================================================
   MOBILE RESPONSIVE ADJUSTMENTS
   モバイル対応調整
   ============================================================ */

@media (max-width: 768px) {
    /* View toggle buttons */
    .view-btn,
    .clean-view-btn {
        width: 40px !important;
        max-width: 40px !important;
        height: 40px !important;
    }
    
    .view-btn::before,
    .clean-view-btn::before {
        font-size: 16px !important;
    }
    
    /* Category filters */
    .filter-category-item,
    .category-filter-option {
        padding: 8px 12px !important;
        font-size: 13px !important;
    }
    
    .filter-category-item::before,
    .category-filter-option::before {
        font-size: 14px !important;
    }
    
    /* Grant buttons */
    .grant-btn,
    .grant-btn--primary {
        padding: 12px 20px !important;
        font-size: 15px !important;
        width: 100% !important;
    }
}

/* ============================================================
   ACCESSIBILITY IMPROVEMENTS
   アクセシビリティ向上
   ============================================================ */

/* Focus states */
.view-btn:focus,
.clean-view-btn:focus,
.filter-category-item:focus,
.parent-category-btn:focus,
.child-category-item:focus {
    outline: 3px solid #000000 !important;
    outline-offset: 2px !important;
}

/* Active states for touch devices */
.view-btn:active,
.filter-category-item:active,
.parent-category-btn:active,
.child-category-item:active {
    transform: scale(0.98) !important;
}

/* ============================================================
   END OF CLEANUP FIXES
   ============================================================ */
